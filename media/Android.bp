java_library {
    name: "updatable-media1",

    srcs: [
        ":media1-srcs",
        ":framework-media-annotation-srcs",
    ],

    aidl: {
        export_include_dirs: [
            "apex/java",
        ],

        // TODO: find out a way to include only the necessary aidl files instead of dirs.
        include_dirs: [
            "frameworks/base/core/java",
            "frameworks/base/media/java",
        ],
    },

    installable: true,

    // Make sure that the implementaion only relies on SDK or system APIs.
    sdk_version: "system_current",
}

java_library {
    name: "updatable-media",

    srcs: [
        ":mediaplayer2-srcs",
        ":mediasession2-srcs",
        ":framework-media-annotation-srcs",
    ],

    aidl: {
        export_include_dirs: [
            "apex/java",
        ],

        include_dirs: [
            // For the usage of android.os.Bundle and android.os.ResultReceiver in aidl files
            "frameworks/base/core/java",
        ],
    },

    static_libs: [
        "mediaplayer2-protos",
    ],

    installable: true,

    // Make sure that the implementaion only relies on SDK or system APIs.
    sdk_version: "system_current",
}

filegroup {
    name: "media-srcs-without-aidls",
    srcs : [
        ":media1-srcs-without-aidls",
        ":mediasession2-srcs-without-aidls",
        ":mediaplayer2-srcs",
    ],
}

filegroup {
    name: "media1-srcs",
    srcs: [
        "apex/java/android/media/MediaParceledListSlice.java",
        "apex/java/android/media/VolumeProvider.java",
        "apex/java/android/media/browse/MediaBrowser.java",
        "apex/java/android/media/browse/MediaBrowserUtils.java",
        "apex/java/android/media/session/ControllerCallbackLink.java",
        "apex/java/android/media/session/ControllerLink.java",
        "apex/java/android/media/session/ISession.aidl",
        "apex/java/android/media/session/ISessionCallback.aidl",
        "apex/java/android/media/session/ISessionController.aidl",
        "apex/java/android/media/session/ISessionControllerCallback.aidl",
        "apex/java/android/media/session/MediaController.java",
        "apex/java/android/media/session/MediaSessionEngine.java",
        "apex/java/android/media/session/MediaSessionProviderService.java",
        "apex/java/android/media/session/PlaybackState.java",
        "apex/java/android/media/session/SessionCallbackLink.java",
        "apex/java/android/media/session/SessionLink.java",
        "apex/java/android/service/media/IMediaBrowserService.aidl",
        "apex/java/android/service/media/IMediaBrowserServiceCallbacks.aidl",
        "apex/java/android/service/media/MediaBrowserService.java",
    ],
}

filegroup {
    name: "media1-srcs-without-aidls",
    srcs: [
        ":media1-srcs",
    ],
    exclude_srcs: [
        "apex/java/android/media/session/ISession.aidl",
        "apex/java/android/media/session/ISessionCallback.aidl",
        "apex/java/android/media/session/ISessionController.aidl",
        "apex/java/android/media/session/ISessionControllerCallback.aidl",
        "apex/java/android/service/media/IMediaBrowserService.aidl",
        "apex/java/android/service/media/IMediaBrowserServiceCallbacks.aidl",
    ],
}

filegroup {
    name: "mediasession2-srcs",
    srcs: [
        "apex/java/android/media/Controller2Link.java",
        "apex/java/android/media/IMediaController2.aidl",
        "apex/java/android/media/IMediaSession2.aidl",
        "apex/java/android/media/IMediaSession2Service.aidl",
        "apex/java/android/media/MediaConstants.java",
        "apex/java/android/media/MediaController2.java",
        "apex/java/android/media/MediaItem2.java",
        "apex/java/android/media/MediaSession2.java",
        "apex/java/android/media/MediaSession2Service.java",
        "apex/java/android/media/Session2Command.java",
        "apex/java/android/media/Session2CommandGroup.java",
        "apex/java/android/media/Session2Link.java",
    ],
}

filegroup {
    name: "mediasession2-srcs-without-aidls",
    srcs: [
        ":mediasession2-srcs",
    ],
    exclude_srcs: [
        "apex/java/android/media/IMediaController2.aidl",
        "apex/java/android/media/IMediaSession2.aidl",
        "apex/java/android/media/IMediaSession2Service.aidl",
    ],
}

filegroup {
    name: "mediaplayer2-srcs",
    srcs: [
        "apex/java/android/media/CloseGuard.java",
        "apex/java/android/media/DataSourceCallback.java",
        "apex/java/android/media/DataSourceDesc.java",
        "apex/java/android/media/UriDataSourceDesc.java",
        "apex/java/android/media/FileDataSourceDesc.java",
        "apex/java/android/media/CallbackDataSourceDesc.java",
        "apex/java/android/media/VideoSize.java",
        "apex/java/android/media/Media2Utils.java",
        "apex/java/android/media/MediaPlayer2Utils.java",
        "apex/java/android/media/MediaPlayer2.java",
        "apex/java/android/media/Media2HTTPService.java",
        "apex/java/android/media/Media2HTTPConnection.java",
        "apex/java/android/media/RoutingDelegate.java",
        "apex/java/android/media/BufferingParams.java",
    ],
}
